<div class="flex flex-col gap-10 shadow-lg px-10 py-10 bg-white rounded-lg h-full">
  <div class="w-full flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
    <h2 class="text-xl sm:text-2xl font-bold text-gray-800">Categorias</h2>
    <button type="button" class="px-4 py-2 rounded-md text-white bg-green-600 hover:bg-green-500 transition-colors" (click)="abrirAdicionar()">
      Adicionar
    </button>
  </div>
  <div class="w-full overflow-auto rounded-md scroll-smooth">
    <table class="min-w-full table-fixed divide-y divide-gray-200">
      <thead class="bg-gray-100 sticky top-0 z-10">
        <tr>
          <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 w-2/6">Id</th>
          <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 w-2/6">Nome</th>
          <th class="px-4 py-2 text-left text-sm font-semibold text-gray-700 w-2/6">Ações</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @for (categoria of categorias; track categoria.id){
          <tr class="hover:bg-gray-50 transition-colors">
            <td class="px-4 py-2 text-sm text-gray-800">{{ categoria.id }}</td>
            <td class="px-4 py-2 text-sm text-gray-800">{{ categoria.descricao }}</td>
            <td class="px-4 py-2 flex gap-2">
              <button type="button" class="p-2 rounded-md bg-gray-100 hover:bg-gray-300 transition-colors" (click)="abrirEditar(categoria)">
                <svg width="20" height="20" fill="none" class="stroke-gray-600 hover:stroke-gray-800" viewBox="0 0 8 8">
                  <path d="M5.077 1.744L6.256 2.923M5.577 1.244C5.903 0.919 6.43 0.919 6.756 1.244C7.081 1.57 7.081 2.097 6.756 2.423L2.167 7.012H1V5.821L5.577 1.244Z" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button type="button" class="p-2 rounded-md bg-red-100 hover:bg-red-600 transition-colors" (click)="abrirExcluir(categoria)">
                <svg width="20" height="20" fill="none" class="stroke-red-600 hover:stroke-white" viewBox="0 0 8 8">
                  <path d="M6.333 2.333L6.044 6.381C6.019 6.73 5.729 7 5.379 7H2.621C2.271 7 1.981 6.73 1.956 6.381L1.667 2.333M3.333 3.667V5.667M4.667 3.667V5.667M5 2.333V1.333C5 1.149 4.851 1 4.667 1H3.333C3.149 1 3 1.149 3 1.333V2.333M1.333 2.333H6.667" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="3" class="px-4 py-2 text-center text-gray-500">Nenhuma categoria encontrada.</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  @if (mostrarFormulario) {
    <div class="fixed inset-0 flex items-center justify-center bg-black/60 z-50">
      <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
        <form [formGroup]="categoriaForm" (ngSubmit)="salvar()">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">{{ modoFormulario === 'adicionar' ? 'Cadastrar Categoria' : 'Editar Categoria' }}</h2>
          <input id="nome" placeholder="Nome" type="text" name="nome" formControlName="nome" required class="w-full rounded-md border px-3 py-2 text-sm text-gray-900 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-400" />
          <div class="mt-6 flex justify-end gap-4">
            <button type="button" (click)="cancelar()" class="px-4 py-2 rounded-md bg-red-500 text-white hover:bg-red-600">Cancelar</button>
            <button type="submit" class="px-4 py-2 rounded-md bg-indigo-600 text-white hover:bg-indigo-500">Salvar</button>
          </div>
        </form>
      </div>
    </div>
  }
  @if(mostrarPopupExclusao) {
    <div class="fixed inset-0 flex items-center justify-center bg-black/60 z-50">
      <div class="bg-red-600 rounded-lg shadow-xl w-full max-w-md p-6">
        <div class="flex items-start gap-4">
          <svg width="30" height="30" viewBox="0 0 40 40" fill="none" class="stroke-white mt-1" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 13.333V20M20 26.667H20.017M35 20C35 28.284 28.284 35 20 35C11.716 35 5 28.284 5 20C5 11.716 11.716 5 20 5C28.284 5 35 11.716 35 20Z" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <div>
            <p class="text-lg font-bold text-white">Tem certeza que deseja excluir esta categoria?</p>
            <p class="mt-2 text-white text-sm">Essa ação é <strong>permanente</strong> e <strong>não poderá ser desfeita</strong>.</p>
            <div class="mt-4 flex gap-4">
              <button type="button" class="bg-white px-4 py-2 rounded-md text-red-600 font-semibold hover:bg-red-200" (click)="excluir()">Excluir</button>
              <button type="button" class="bg-red-700 px-4 py-2 rounded-md text-white font-semibold hover:bg-red-800" (click)="cancelar()">Cancelar</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  }
</div>
