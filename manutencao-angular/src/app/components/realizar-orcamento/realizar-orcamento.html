<div class= "p-10 bg-white rounded-lg h-full">
    <div class="px-4 sm:px-0">
        <h2 class="font-bold text-[22px]">Orçamento</h2>
            <p class="mt-1 max-w-2xl text-sm/6 text-gray-500">Detalhes do equipamento e defeito informado.</p>
    </div>
    @if (solicitacao) {
        <div class="mt-6 border-t border-gray-100">
            <dl class="divide-y divide-gray-100">
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm/6 font-medium text-gray-900">Descrição do Equipamento</dt>
                    <dd class="mt-1 text-sm/6 text-gray-700 sm:col-span-2 sm:mt-0">{{ solicitacao.equipamento }}</dd>
                </div>
    
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm/6 font-medium text-gray-900">Categoria</dt>
                    <dd class="mt-1 text-sm/6 text-gray-700 sm:col-span-2 sm:mt-0">{{ solicitacao.categoria }}</dd>
                </div>
    
                <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
                    <dt class="text-sm/6 font-medium text-gray-900">Defeito Reportado</dt>
                    <dd class="mt-1 text-sm/6 text-gray-700 sm:col-span-2 sm:mt-0">{{ solicitacao.descricao }}</dd>
                </div>
            </dl>
        </div>
    }
    <div>
        <h2 class="font-semibold">Itens do Orçamento</h2>
        <form [formGroup]="orcamentoForm" (ngSubmit)="enviarOrcamento()">
            <div formArrayName="itens">
                @for (item of itens.controls; track item; let i = $index) {
                    <div [formGroupName]="i" class="flex gap-4">
                        <input formControlName="descricao" placeholder="Descrição do item" />
                        <input formControlName="preco" type="number" placeholder="Preço" (input)="atualizarTotal()" />
                        <button type="button" (click)="removerItem(i)" class= "p-2 bg-red-400 text-white rounded-md">Remover</button>
                    </div>
                }
            </div>

            <div class="flex gap-4 mt-4">
                <input type="text" formControlName="novoItemDescricao" placeholder="Descrição" class="border p-2 rounded-md " />
                <input type="number" formControlName="novoItemPreco" placeholder="Valor" class="border p-2 rounded-md" />
                <button type="button" (click)="adicionarItem()" class="bg-blue-500 text-white px-4 py-2 cursor-pointer">
                    Adicionar Item
                </button>
            </div>

            <div class="mt-4 font-semibold">
              <!--  <p>Total: {{ orcamentoForm.get('precoTotal')?.value | moedaBr }}</p> -->
            </div>
            <button type="submit" [disabled]="orcamentoForm.invalid" class="bg-green-600 text-white px-4 py-2 mt-2 cursor-pointer">
                Salvar Orçamento
            </button>
        </form>
    </div>
</div>

  

